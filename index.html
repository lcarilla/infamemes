<style>
  body {
    font-family: "Roboto", sans-serif;
  }
  #card-container {
    display: flex;
    flex-wrap: wrap;
  }
  .card > img {
    max-width: 100%;
    max-height: 100%;
  }
  .card {
    height: 55vh;
    width: calc((100% / 3) - 16px);
    margin: 8px;
    border-radius: 3px;
    transition: all 200ms ease-in-out;
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>
<div id="card-container"></div>
<script defer>
  const cardContainer = document.getElementById("card-container");
  const createCard = () => {
    return new Promise((resolve) => {
      fetch("https://meme-api.com/gimme").then((value) =>
        value.json().then((res) => {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `<img src="${res.url}">`;
          card.style.backgroundColor = "#111111";
          cardContainer.appendChild(card);
          resolve();
        })
      );
    });
  };
  const addCards = async () => {
    for (let i = 0; i <= 3; i++) {
      await createCard();
    }
  };

  const handleInfiniteScroll = () => {
    window.removeEventListener("scroll", handleInfiniteScroll);
    setTimeout(() => {
      const endOfPage =
        window.innerHeight + window.pageYOffset >= document.body.offsetHeight;
      console.log(endOfPage);
      if (endOfPage) {
        addCards();
      }
      console.log("buh");
      window.addEventListener("scroll", handleInfiniteScroll);
    }, 1000);
    console.log("triggered");
  };

  window.addEventListener("scroll", handleInfiniteScroll);
  async function lol() {
    while (document.body.scrollHeight <= document.body.clientHeight) {
      await createCard();
    }
  }
  lol();
</script>